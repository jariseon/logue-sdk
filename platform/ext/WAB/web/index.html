<!DOCTYPE html>
<html>
<head>
  <title>KORG Logue WAB</title>
  <!-- libs -->
  <script src="libs/wab-node.js"></script>
  <script src="libs/wab-monosynth.js"></script>
  <script src="libs/wab-svgknob.js"></script>
  <script src="libs/wab-scope.js"></script>
  <script src="libs/wab-spect.js"></script>
  <script src="libs/wab-keys.js"></script>
  <script src="libs/wab-utils.js"></script>

  <!-- logue -->
  <script src="logue-synth.js"></script>
  <script src="logue-node.js"></script>
  <script src="logue-gui.js"></script>
  <link rel="stylesheet" href="logue.css">
</head>
<script>
	let actx,synth;

  let options = {
    overlay: true,      // show overlay prompt at startup (used to resolve autoplay policy)
    hold: true,         // ignore note offs
    pitch: 60,          // default pitch (midi note number)
    freqRange: 5,       // default freq range for spectrum display (5,10,15,20)
    outLevel: 0.2,      // default output level (0..1)
    oscillator: "pd"    // default oscillator (descriptor.type)
  }

  function main () {
    actx  = new AudioContext();
    synth = new KORG.LogueSynth();
    synth.init(options);
  }
</script>

<body onload="main()">
  <h1>logue-sdk web simulator</h1>
  <div class="subtitle">
    <h2>monophonic user oscillator test/demo widget</h2>
    <a href="https://github.com/jariseon/logue-sdk/tree/wasm-demos" target="_blank">github</a>
  </div>
  <div id="container">

    <div>
      <div id="topbar">
        <label id="oscreload" onclick="synth.reload('osc')">OSCILLATOR</label><select id="osc" onchange="synth.setOscType(this.value)"></select>
        <div class="toggle active" id="hold">HOLD</div>
        <label>OUT LEVEL</label><input type="range" id="outLevel" min="0" max="100" value="20" oninput="synth.masterGain = this.value/100">
        <div class="right midi"><label>MIDI</label><select id="midiIn" onchange="onmidi(this.value)"></select></div>
      </div>

      <div id="frontpanel">
        <div id="plots">
          <div id="scope" class="plot"></div>
          <div id="spect" class="plot"></div>
          <div id="spectscale">
            <div class="toggle active">5</div>
            <div class="toggle">10</div>
            <div class="toggle">15</div>
            <div class="toggle">20</div>
          </div>
        </div>
        <div id="knobs">
          <wab-svgknob label="SHAPE" id="shape"></wab-svgknob>
          <wab-svgknob label="PARAM 1"></wab-svgknob>
          <wab-svgknob label="PARAM 2"></wab-svgknob>
          <wab-svgknob label="PARAM 3"></wab-svgknob>
          <wab-svgknob label="PARAM 4"></wab-svgknob>
          <wab-svgknob label="PARAM 5"></wab-svgknob>
          <wab-svgknob label="PARAM 6"></wab-svgknob>
          <wab-svgknob label="LFO" id="lfo"></wab-svgknob>
        </div>
      </div>

      <div id="keys"></div>
    </div>
    <div id="overlay">
      <div>click to start web audio</div>
      <div class="note">(deactive HOLD for note offs)</div>
    </div>

  </div>

  <div id="bottomline">
    <div>requires chromium-based or firefox browser</div>
    <div class="credit">logue-sdk (KORG), wasm stuff (jari)</div>
  </div>

  <div id="info">
    hold down shift key for alt shape and lfo rate control
    <div style="margin-top:15px;">oscillators</div>
    <ul>
      <li><div>KORG</div>sdk oscs</li>
      <li><div>PLAITS</div>Mutable Instruments&nbsp;<a href="https://github.com/peterall/eurorack-prologue" target="_blank">macro-oscillator</a></li>
      <li><div>JARI</div>extended&nbsp;<a href="https://www.dafx.de/paper-archive/details.php?id=pnPMKb4L_ZBFzl-725e6QQ" target="_blank">vps</a>&nbsp;oscillator</li>
    </ul>
  </div>
</body>
</html>
